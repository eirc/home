# act like GNU screen
unbind C-b
set -g prefix C-a

set-option -g default-shell "/usr/local/bin/zsh"
set -g default-command "reattach-to-user-namespace -l $SHELL"

# start window numbers at 1 to match keyboard order with tmux window order
set -g base-index 1
set-window-option -g pane-base-index 1

# renumber windows sequentially after closing any of them
set -g renumber-windows on

# soften status bar color from harsh green to light gray
set -g status-bg '#666666'
set -g status-fg '#aaaaaa'

# active window color
set-window-option -g window-status-current-fg green

# remove administrative debris (hostname, time) in status bar
set -g status-left-length 13
set -g status-left "#[fg=blue]#S"
set -g status-right ''

# mouse mode
bind m \
  set -g mode-mouse on \;\
  set -g mouse-resize-pane on \;\
  set -g mouse-select-pane on \;\
  set -g mouse-select-window on \;\
  display 'Mouse: ON'

bind M \
  set -g mode-mouse off \;\
  set -g mouse-resize-pane off \;\
  set -g mouse-select-pane off \;\
  set -g mouse-select-window off \;\
  display 'Mouse: OFF'

# new panes use current path
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# clear screen & history with C-k
bind -n C-k send-keys C-l \; run-shell "sleep .3s" \; clear-history

# give prefix q "display panes" more time
set -g display-panes-time 10000

# Smaller pane resize step
set-option -g @pane_resize "2"

# Copy SSH agent related env variables from shell
set -g update-environment "SSH_ASKPASS SSH_AUTH_SOCK SSH_AGENT_PID SSH_CONNECTION"

set -g @tpm_plugins '              \
  tmux-plugins/tpm                 \
  eirc/tmux-sensible               \
  tmux-plugins/tmux-resurrect      \
  tmux-plugins/tmux-pain-control   \
'

run-shell '~/.tmux/plugins/tpm/tpm'
set-option -g default-command "reattach-to-user-namespace -l $SHELL"
